############################################################################################################################################
############################################################################################################################################
####                                                                                                                                    ####
####                            Create Security group for public facing VPC and allow all traffic                                       ####
####                                                                                                                                    ####
############################################################################################################################################
############################################################################################################################################


resource "aws_security_group" "harsh-viradia-security-sg" {
  name = "harsh-viradia-security-sg"
  vpc_id = aws_vpc.harsh-viradia-security-vpc.id

  ingress {
    from_port   = 0
    to_port     = 0
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

    ingress {
    from_port   = 443
    to_port     = 443
    protocol    = "tcp"
    cidr_blocks = ["0.0.0.0/0"]
  }

  egress {
    from_port   = 0
    to_port     = 0
    protocol    = "-1"
    cidr_blocks = ["0.0.0.0/0"]
  }

  tags = {
    "Name" = "harsh-viradia-security-sg"
  }
}


############################################################################################################################################
############################################################################################################################################
####                                                                                                                                    ####
####                            For Croos refrence security group                                                                       ####
####                                                                                                                                    ####
############################################################################################################################################
############################################################################################################################################


# module "ssg" {
#   source = "terraform-aws-modules/security-group/aws"
#   name = "sec_sg"
#   vpc_id = aws_vpc.harsh-viradia-security-vpc.id

#   ingress_with_cidr_blocks = [
#     {
#       from_port   = "0"
#       to_port     = "65535"
#       protocol    = "tcp"
#       cidr_blocks = "0.0.0.0/0"
#     }
#   ]

#   egress_with_cidr_blocks = [ {
#       from_port   = "0"
#       to_port     = "0"
#       protocol    = "-1"
#       cidr_blocks = "0.0.0.0/0"
#   } ]

# }

